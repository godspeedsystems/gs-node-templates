## Setup using Docker
You will need to run Kafka and Postgres using docker or otherwise locally.

There is a `docker-compose.yaml` file in this project. Just run `docker compose up -d` to setup Postgres and Kafka services.

### AWS setup
This bit you will need to do yourself on AWS console dashboard. You can start the project without it but the appl_for_loan API will not work becase there we upload a file to AWS S3 service. 

### Prisma client setup
You will need to run the command 
```npx prisma generate --schema=src/datasources/lending_service_db.prisma```

This generate a prisma client for this prisma schema, in your datasources folder. 

### Generate graphql schema
There is a Graphql schema already generated for you in this project setup. This will automatically get loaded for `graphql.yaml` eventsource. Unless you want to add some new change to Graphql schema you need not do anything to get the graphql api working on apollo sandbox.
You will be able to open apollo sandbox on [this url](https://studio.apollographql.com/sandbox/explorer/)
#### Publishing updated Graphql schema
 Http swagger event schema is generated dynamically everytime the project starts or hot-reloads upon live changes. But Graphql schema needs to be manually generated by you when you modify any graphql event's schema in the `src/events`, and want to publish the new schema to Graphql API also. You can do this with the following command 
`godspeed gen-graphql-schema`
p.s. Current api export to graphql does not support `content-type: multipart/form-data` It is mentioned in one of the events `apply_for_loan`. In case you want to generate graphql schema you will need to temporarily replace that part in `apply_for_loan` with `content-type: application/json`

### Environment variables
You will need to setup your .env file with correct variables

### Running the project
Run this command
```godspeed serve```

To start from scratch, install any plugins, setup DB model on your database and start your service, etc refer to Godspeed Documentation for [getting started](https://docs.godspeed.systems/docs/getting_started/overview)

Once your project is running open up `localhost:3000/api-docs` for Swagger endpoints access and `https://studio.apollographql.com/sandbox/explorer/` for Apollo Graphql sandbox.